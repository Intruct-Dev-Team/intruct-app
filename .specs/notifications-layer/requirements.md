# Requirements Document

## Introduction

Нужен единый слой уведомлений в приложении (Expo/React Native), который позволит показывать пользователю краткие оповещения:

- об успешной авторизации и выходе из аккаунта,
- о начале создания курса,
- об ошибках (сетевых, валидации, неожиданных).

Решение должно состоять из провайдера (централизованная точка управления состоянием/очередью уведомлений) и настраиваемого UI-компонента уведомления, который можно переиспользовать в разных местах приложения.

## Requirements

### Requirement 1 – Notifications Provider

**User Story:** Как пользователь, я хочу получать уведомления в одном стиле по всему приложению, чтобы сразу понимать состояние действий.

#### Acceptance Criteria

1. WHEN приложение инициализируется THEN система SHALL предоставлять глобальный notifications provider для всех экранов.
2. WHEN любой экран или сервис вызывает API уведомлений THEN система SHALL отображать уведомление без прямой зависимости от конкретного экрана.
3. WHEN вызывается показ уведомления THEN система SHALL поддерживать минимум три типа уведомлений: success, info, error.
4. WHEN показывается новое уведомление THEN система SHALL не ломать навигацию и не блокировать основной UI.

### Requirement 2 – Configurable Notification Component

**User Story:** Как разработчик, я хочу настраиваемый компонент уведомления, чтобы контролировать заголовок, сообщение и поведение.

#### Acceptance Criteria

1. WHEN уведомление отображается THEN система SHALL поддерживать вывод заголовка (опционально) и текста сообщения.
2. WHEN уведомление отображается THEN система SHALL поддерживать автозакрытие по таймеру (опционально).
3. WHEN пользователь закрывает уведомление вручную THEN система SHALL скрывать уведомление немедленно.
4. WHEN уведомление содержит действие THEN система SHALL поддерживать кнопку/CTA (опционально) с обработчиком.

### Requirement 3 – Auth Success Notifications

**User Story:** Как пользователь, я хочу подтверждение успешного входа/выхода, чтобы понимать результат.

#### Acceptance Criteria

1. WHEN пользователь успешно авторизовался THEN система SHALL показать success-уведомление.
2. WHEN пользователь успешно вышел из аккаунта THEN система SHALL показать success-уведомление.

### Requirement 4 – Course Creation Started Notification

**User Story:** Как пользователь, я хочу видеть уведомление о начале создания курса, чтобы понимать, что процесс запущен.

#### Acceptance Criteria

1. WHEN пользователь запускает создание курса THEN система SHALL показать info-уведомление о начале процесса.

### Requirement 5 – Error Notifications

**User Story:** Как пользователь, я хочу видеть понятные уведомления об ошибках, чтобы знать что пошло не так и что делать дальше.

#### Acceptance Criteria

1. WHEN происходит ожидаемая ошибка (например сеть или валидация) THEN система SHALL показать error-уведомление с понятным сообщением.
2. WHEN происходит неизвестная/неожиданная ошибка THEN система SHALL показать error-уведомление с безопасным общим текстом.
3. IF ошибка содержит техдетали THEN система SHALL не показывать чувствительные данные пользователю в тексте уведомления.

### Requirement 6 – Concurrency and Dismissal Behavior

**User Story:** Как пользователь, я хочу предсказуемое поведение при нескольких уведомлениях, чтобы они не мешали.

#### Acceptance Criteria

1. WHEN несколько уведомлений вызываются подряд THEN система SHALL показывать их предсказуемо (очередь или замена текущего) согласно единому правилу.
2. WHEN показывается уведомление THEN система SHALL ограничивать количество одновременно видимых уведомлений до 1.
3. WHEN уведомление скрывается THEN система SHALL корректно освобождать ресурсы (таймеры, обработчики) без утечек.

## Global Assumptions

- Уведомления должны быть визуально совместимы с текущим UI-стеком (Tamagui) и темизацией (через существующие theme primitives), без хардкода новых цветов.
- Реализация не должна требовать прямых вызовов `fetch()` из UI-компонентов; интеграция должна происходить на уровне экранов/сервисов, которые уже знают об исходе операции.
